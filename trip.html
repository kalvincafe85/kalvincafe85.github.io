<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>南投週末小旅行</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&amp;family=Fredoka:wght@400;600&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
        }
        .font-display {
            font-family: 'Fredoka', 'Noto Sans TC', sans-serif;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        /* Accordion Transition */
        .accordion-content { transition: grid-template-rows 0.3s ease-out; }
        .accordion-open { grid-template-rows: 1fr; }
        .accordion-closed { grid-template-rows: 0fr; }

        /* Map Fixes */
        .leaflet-container {
            background: #e2e8f0;
            width: 100%;
            height: 100%;
        }

        /* Slideshow Animation */
        .slide-bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            z-index: 0;
        }
        .slide-bg.active {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

<header class="relative bg-slate-900 text-white pb-24 overflow-hidden rounded-b-[3rem] shadow-xl h-[400px]">
    
    <div id="slideshow-container" class="absolute inset-0 w-full h-full">
        </div>

    <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/20 to-teal-900/90 z-10"></div>
    
    <div class="container mx-auto px-6 pt-12 relative z-20 h-full flex flex-col justify-center">
        <div class="flex flex-col md:flex-row items-end md:items-center justify-between pb-10">
            <div class="mb-6 md:mb-0 w-full">
                <div class="inline-block px-3 py-1 bg-yellow-400 text-teal-900 rounded-full text-xs font-bold tracking-wider mb-2 shadow-lg">南投・台中</div>
                <h1 class="text-4xl md:text-6xl font-display font-black leading-tight mb-2 drop-shadow-lg">
                    週末小旅行
                    <span class="block text-2xl font-medium opacity-90 mt-1 font-sans">Relaxing Getaway</span>
                </h1>
                <p class="text-white/80 text-sm md:text-base max-w-lg drop-shadow-md">
                    探索中台灣的隱藏美景，從童話城堡到森林秘境，享受兩天一夜的慢活時光。
                </p>
            </div>
            <div class="bg-white/20 backdrop-blur-md rounded-2xl p-4 flex items-center gap-4 border border-white/30 shadow-lg shrink-0">
                <img alt="Weather" class="w-12 h-12 object-contain drop-shadow-md" src="https://image.pollinations.ai/prompt/simple%20vector%20icon%20weather%20sun%20cloud%20flat%20design?width=100&amp;height=100&amp;nologo=true">
                <div>
                    <div class="text-sm font-bold opacity-80 text-white">12/20 - 12/21</div>
                    <div class="text-2xl font-black text-white">22°C <span class="text-base font-normal">晴時多雲</span></div>
                </div>
            </div>
        </div>
    </div>
</header>

<main class="container mx-auto px-4 -mt-16 relative z-30 pb-20">
    <div class="flex justify-center mb-8 gap-4">
        <button class="tab-btn transform transition-all shadow-lg border-2 border-teal-600 w-36 py-2 rounded-2xl flex flex-col items-center justify-center gap-0 bg-teal-600 text-white ring-4 ring-teal-100/50" id="tab-day1" onclick="switchDay(1)">
            <span class="text-xl font-black tracking-wider leading-tight">DAY 1</span>
            <span class="text-xs font-medium opacity-80 mt-0.5">12/20 SAT</span>
        </button>
        
        <button class="tab-btn transform transition-all shadow-md bg-white text-slate-400 border-2 border-transparent w-36 py-2 rounded-2xl flex flex-col items-center justify-center gap-0 hover:bg-slate-100" id="tab-day2" onclick="switchDay(2)">
            <span class="text-xl font-black tracking-wider leading-tight">DAY 2</span>
            <span class="text-xs font-medium opacity-80 mt-0.5">12/21 SUN</span>
        </button>
    </div>

    <div class="max-w-5xl mx-auto space-y-5" id="itinerary-container">
        </div>

    <div class="max-w-5xl mx-auto mt-12 bg-indigo-50 border-2 border-dashed border-indigo-200 rounded-3xl p-6 relative overflow-hidden">
        <div class="absolute top-0 right-0 bg-indigo-500 text-white text-xs font-bold px-3 py-1 rounded-bl-xl">雨備 / 時間充裕</div>
        <div class="flex items-start gap-4">
            <div class="bg-indigo-100 p-3 rounded-2xl text-indigo-600">
                <span class="material-symbols-outlined text-3xl">umbrella</span>
            </div>
            <div>
                <h3 class="text-xl font-bold text-indigo-900 mb-1">備用景點：Cona's 妮娜巧克力夢想城堡</h3>
                <p class="text-indigo-700 text-sm mb-3">絕美歐風城堡，適合拍照、買伴手禮與品嚐巧克力。</p>
                <div class="flex gap-2 text-xs text-indigo-600 bg-white/50 inline-flex px-3 py-1 rounded-full">
                    <span class="material-symbols-outlined text-sm">schedule</span> 10:00 - 17:30
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    // --- 1. Images Configuration ---
    
    // Header Slideshow Images (20 High Quality Scenic/Travel Photos)
    const SLIDESHOW_IMAGES = [
        "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1600&auto=format&fit=crop", // Nature
        "https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=1600&auto=format&fit=crop", // Lake
        "https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1600&auto=format&fit=crop", // Mountain
        "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=1600&auto=format&fit=crop", // Mountains
        "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=1600&auto=format&fit=crop", // Green field
        "https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=1600&auto=format&fit=crop", // Castle vibe
        "https://images.unsplash.com/photo-1533052770678-f7b707470487?q=80&w=1600&auto=format&fit=crop", // Forest
        "https://images.unsplash.com/photo-1542224566-6e85f2e6772f?q=80&w=1600&auto=format&fit=crop", // Forest road
        "https://images.unsplash.com/photo-1627409667503-4c9197c364be?q=80&w=1600&auto=format&fit=crop", // Tea garden vibe
        "https://images.unsplash.com/photo-1587595431973-160d0d94add1?q=80&w=1600&auto=format&fit=crop", // Green hills
        "https://images.unsplash.com/photo-1558280417-3e284a92357a?q=80&w=1600&auto=format&fit=crop", // Train
        "https://images.unsplash.com/photo-1571407970349-bc81e7e96d47?q=80&w=1600&auto=format&fit=crop", // Architecture
        "https://images.unsplash.com/photo-1544644181-1484b3fdfc62?q=80&w=1600&auto=format&fit=crop", // Resort
        "https://images.unsplash.com/photo-1490730141103-6cac27aaab94?q=80&w=1600&auto=format&fit=crop", // Sunset
        "https://images.unsplash.com/photo-1516822600277-33866d99df47?q=80&w=1600&auto=format&fit=crop", // Roadtrip
        "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=1600&auto=format&fit=crop", // Sky
        "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?q=80&w=1600&auto=format&fit=crop", // Scenic
        "https://images.unsplash.com/photo-1596392927852-2a18c336fb60?q=80&w=1600&auto=format&fit=crop", // Bubble tea/Food
        "https://images.unsplash.com/photo-1523987355523-c7b5b0dd90a7?q=80&w=1600&auto=format&fit=crop", // Grass
        "https://images.unsplash.com/photo-1598959952219-5d475657849f?q=80&w=1600&auto=format&fit=crop"  // Taiwan street vibe
    ];

    // Specific Images for Itinerary Items (Replacing AI images with real-looking Unsplash photos)
    const ATTRACTION_IMAGES = {
        "d1-01": "https://images.unsplash.com/photo-1514216431901-83d8e09f5383?q=80&w=400&fit=crop", // HSR/Modern Station
        "d1-02": "https://images.unsplash.com/photo-1626027376092-22df674483a3?q=80&w=400&fit=crop", // Dinosaur/Zoo
        "d1-03": "https://images.unsplash.com/photo-1542665093-6052733d7788?q=80&w=400&fit=crop", // Blue Castle vibe
        "d1-04": "https://images.unsplash.com/photo-1589886756627-18b855598688?q=80&w=400&fit=crop", // Wood craft/Nutcracker
        "d1-05": "https://images.unsplash.com/photo-1563805042-7684c019e1cb?q=80&w=400&fit=crop", // Ice Cream
        "d1-06": "https://images.unsplash.com/photo-1590490360182-c33d57733427?q=80&w=400&fit=crop", // Cozy Room
        "d1-07": "https://images.unsplash.com/photo-1529198642398-7ae1eb240b2a?q=80&w=400&fit=crop", // Dumplings
        "d2-01": "https://images.unsplash.com/photo-1493770348161-369560ae357d?q=80&w=400&fit=crop", // Breakfast
        "d2-02": "https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=400&fit=crop", // Modern White Building
        "d2-03": "https://images.unsplash.com/photo-1606092195730-5d7b9af1ef4d?q=80&w=400&fit=crop", // Playground/Park
        "d2-04": "https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?q=80&w=400&fit=crop"  // Car/Driving
    };

    // --- 2. Data Source ---
    const itineraryData = [
        // DAY 1
        {
            day: 1,
            id: "d1-01",
            time: "09:00",
            title: "高鐵台中站集合",
            type: "transport",
            route: { from: "台北", to: "台中高鐵", method: "高鐵", duration: "40-60 min", fromCoords: { lat: 25.0478, lng: 121.5170 }, toCoords: { lat: 24.1120, lng: 120.6156 } },
            details: {
                desc: "快樂出發！抵達台中後前往租車櫃檯取車。",
                hours: "06:00 - 24:00",
                parking: "站內立體停車場 (收費)"
            }
        },
        {
            day: 1,
            id: "d1-02",
            time: "10:00 - 11:30",
            title: "九九峰動物樂園",
            type: "activity",
            route: { from: "高鐵台中站", to: "九九峰樂園", method: "開車", duration: "40 min", fromCoords: { lat: 24.1120, lng: 120.6156 }, toCoords: { lat: 23.9926, lng: 120.7554 } },
            details: {
                desc: "南投全新寬敞動物園，必看巨大恐龍區與超親人鳥類互動。",
                hours: "09:00 - 17:00",
                parking: "附設收費停車場 ($100/次)"
            }
        },
        {
            day: 1,
            id: "d1-03",
            time: "12:00 - 13:30",
            title: "藍色城堡民宿 (午餐)",
            type: "food",
            tag: "已訂位",
            route: { from: "九九峰樂園", to: "藍色城堡", method: "開車", duration: "30 min", fromCoords: { lat: 23.9926, lng: 120.7554 }, toCoords: { lat: 23.9678, lng: 120.9705 } },
            details: {
                desc: "夢幻歐式藍色城堡，享用精緻法式甜點與午餐，每個角落都超好拍。",
                hours: "10:00 - 18:00",
                parking: "城堡旁有專屬免費停車場"
            }
        },
        {
            day: 1,
            id: "d1-04",
            time: "13:30 - 15:30",
            title: "敲敲木工房",
            type: "activity",
            route: { from: "藍色城堡", to: "敲敲木工房", method: "開車", duration: "10 min", fromCoords: { lat: 23.9678, lng: 120.9705 }, toCoords: { lat: 23.9632, lng: 120.9750 } },
            details: {
                desc: "超可愛的胡桃鉗與音樂盒DIY工廠，免門票參觀。",
                hours: "09:30 - 16:30 (週二三休)",
                parking: "門口約5個車位，假日後方有大停車場"
            }
        },
        {
            day: 1,
            id: "d1-05",
            time: "順遊",
            title: "巷弄裡 Ice Cream",
            type: "food",
            route: { from: "敲敲木工房", to: "巷弄裡冰店", method: "走路", duration: "15 min", fromCoords: { lat: 23.9632, lng: 120.9750 }, toCoords: { lat: 23.9592, lng: 120.9700 } },
            details: {
                desc: "散步去吃冰！隱藏在埔里巷弄中的消暑美味。",
                hours: "10:00 - 18:00",
                parking: "無 (建議步行前往)"
            }
        },
        {
            day: 1,
            id: "d1-06",
            time: "16:00 - 18:00",
            title: "民宿下午茶 & 休息",
            type: "rest",
            route: { from: "巷弄裡冰店", to: "藍色城堡", method: "開車", duration: "10 min", fromCoords: { lat: 23.9592, lng: 120.9700 }, toCoords: { lat: 23.9678, lng: 120.9705 } },
            details: {
                desc: "Check-in 休息，享受城堡內的悠閒時光。",
                hours: "入住 15:00 後",
                parking: "民宿停車場"
            }
        },
        {
            day: 1,
            id: "d1-07",
            time: "18:00 - 19:30",
            title: "虎味 鉄燒煎餃",
            type: "food",
            route: { from: "藍色城堡", to: "虎味煎餃", method: "開車", duration: "10 min", fromCoords: { lat: 23.9678, lng: 120.9705 }, toCoords: { lat: 23.9650, lng: 120.9650 } },
            details: {
                desc: "晚餐時間，品嚐在地熱門的鐵板煎餃 (請確認現場候位狀況)。",
                hours: "17:00 - 20:00",
                parking: "路邊停車"
            }
        },
        // DAY 2
        {
            day: 2,
            id: "d2-01",
            time: "07:30 - 11:00",
            title: "民宿早餐 / 退房",
            type: "rest",
            route: { from: "藍色城堡", to: "藍色城堡", method: "原地", duration: "-", fromCoords: { lat: 23.9678, lng: 120.9705 }, toCoords: { lat: 23.9678, lng: 120.9705 } },
            details: {
                desc: "享受城堡早餐，整理行李準備退房。",
                hours: "退房時間 11:00",
                parking: "-"
            }
        },
        {
            day: 2,
            id: "d2-02",
            time: "11:30 - 13:30",
            title: "日月町複合式商場",
            type: "activity",
            route: { from: "藍色城堡", to: "日月町", method: "開車", duration: "30 min", fromCoords: { lat: 23.9678, lng: 120.9705 }, toCoords: { lat: 23.9710, lng: 120.9300 } },
            details: {
                desc: "全新白色系美學商場，有蔦屋書店、餐車聚落與在地選物。",
                hours: "10:00 - 20:00",
                parking: "免費大型停車場"
            }
        },
        {
            day: 2,
            id: "d2-03",
            time: "14:00 - 16:00",
            title: "好田森林",
            type: "activity",
            route: { from: "日月町", to: "好田森林", method: "開車", duration: "40 min", fromCoords: { lat: 23.9710, lng: 120.9300 }, toCoords: { lat: 23.9000, lng: 120.5300 } },
            details: {
                desc: "彰化田尾恐龍主題親子樂園，有滑草、卡丁車與沙坑。",
                hours: "10:00 - 18:00",
                parking: "周邊收費停車場"
            }
        },
        {
            day: 2,
            id: "d2-04",
            time: "16:40 - 17:00",
            title: "高鐵台中站 (還車)",
            type: "transport",
            route: { from: "好田森林", to: "台中高鐵", method: "開車", duration: "40 min", fromCoords: { lat: 23.9000, lng: 120.5300 }, toCoords: { lat: 24.1120, lng: 120.6156 } },
            details: {
                desc: "平安賦歸，辦理還車手續。",
                hours: "-",
                parking: "站區停車"
            }
        }
    ];

    // --- 3. App Logic ---
    
    // Initialize
    window.onload = function() {
        startSlideshow();
        switchDay(1);
    }

    // Slideshow Function
    function startSlideshow() {
        const container = document.getElementById('slideshow-container');
        
        // Create slide elements
        SLIDESHOW_IMAGES.forEach((url, index) => {
            const slide = document.createElement('div');
            slide.className = `slide-bg ${index === 0 ? 'active' : ''}`;
            slide.style.backgroundImage = `url('${url}')`;
            container.appendChild(slide);
        });

        // Cycle through slides
        let currentIndex = 0;
        const slides = document.querySelectorAll('.slide-bg');
        
        setInterval(() => {
            slides[currentIndex].classList.remove('active');
            currentIndex = (currentIndex + 1) % slides.length;
            slides[currentIndex].classList.add('active');
        }, 5000); // Change every 5 seconds
    }
    
    // Switch Tabs
    window.switchDay = function(day) {
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('bg-teal-600', 'text-white', 'ring-4', 'ring-teal-100/50');
            btn.classList.add('bg-white', 'text-slate-400');
        });
        const activeBtn = document.getElementById(`tab-day${day}`);
        activeBtn.classList.remove('bg-white', 'text-slate-400');
        activeBtn.classList.add('bg-teal-600', 'text-white', 'ring-4', 'ring-teal-100/50');

        renderItinerary(day);
    }

    function renderItinerary(day) {
        const container = document.getElementById('itinerary-container');
        container.innerHTML = '';

        const dayItems = itineraryData.filter(item => item.day === day);

        dayItems.forEach((item, index) => {
            const el = document.createElement('div');
            el.className = 'relative pl-4 md:pl-0';
            const imgSrc = ATTRACTION_IMAGES[item.id] || "https://images.unsplash.com/photo-1527631746610-bca00a040d60?q=80&w=400"; // Fallback

            el.innerHTML = `
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden cursor-pointer group hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1" onclick="toggleDetails('${item.id}')">
                    <div class="flex flex-col md:flex-row min-h-[140px]">
                        
                        <div class="p-5 flex-1 flex flex-col justify-between relative order-2 md:order-1">
                            <div class="absolute top-4 right-4 text-slate-300 transition-transform duration-300" id="icon-${item.id}">
                                <span class="material-symbols-outlined">expand_more</span>
                            </div>
                            
                            <div>
                                <div class="flex items-center gap-2 text-xs font-bold text-slate-400 mb-2">
                                    <span class="material-symbols-outlined text-sm">schedule</span> ${item.time}
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 leading-tight mb-3 flex items-center gap-2 group-hover:text-teal-600 transition-colors">
                                    ${item.title}
                                    ${item.tag ? `<span class="bg-pink-100 text-pink-600 text-[14px] px-2 py-0.5 rounded-full">${item.tag}</span>` : ''}
                                </h3>
                                
                                <div class="flex items-start gap-3 mb-2">
                                    <img src="${imgSrc}" class="w-16 h-16 rounded-lg object-cover bg-slate-100 shrink-0 shadow-md border border-slate-100">
                                    <p class="text-sm text-slate-500 line-clamp-3 leading-relaxed font-medium pt-1">${item.details.desc}</p>
                                </div>
                            </div>

                            <div class="bg-slate-50 rounded-lg px-3 py-2 border border-slate-100 flex items-center justify-between gap-2 text-xs text-slate-500 mt-2">
                                <div class="text-center font-bold text-slate-700 w-16 truncate">${item.route.from}</div>
                                <div class="flex-1 flex flex-col items-center">
                                    <span class="material-symbols-outlined text-xs text-teal-500">${item.route.method === '走路' ? 'directions_walk' : 'directions_car'}</span>
                                    <div class="h-0.5 w-full bg-slate-300 relative my-0.5"></div>
                                    <span class="text-[14px] bg-white px-1 rounded shadow-sm border border-slate-100 relative -top-1.5">${item.route.duration}</span>
                                </div>
                                <div class="text-center font-bold text-slate-700 w-16 truncate">${item.route.to}</div>
                            </div>
                        </div>

                        <div class="md:w-40 bg-slate-100 relative border-l border-slate-100 order-1 md:order-2 h-32 md:h-auto overflow-hidden">
                             <div class="w-full h-full grayscale opacity-70 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500">
                                <div id="map-${item.id}" class="w-full h-full" style="min-height: 100%;"></div>
                            </div>
                            <div class="absolute bottom-1 right-1 bg-white/80 backdrop-blur text-[9px] font-bold px-1.5 py-0.5 rounded shadow-sm flex items-center gap-1 pointer-events-none text-slate-600 z-[400]">
                                <span class="material-symbols-outlined text-[14px]">location_on</span> 地圖
                            </div>
                        </div>
                    </div>

                    <div id="details-${item.id}" class="grid grid-rows-[0fr] accordion-content bg-slate-50 border-t border-slate-100">
                        <div class="overflow-hidden">
                            <div class="p-4 flex flex-wrap gap-4 text-sm">
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-yellow-500">store</span>
                                    <span class="text-slate-600">營業時間: ${item.details.hours}</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-blue-500">local_parking</span>
                                    <span class="text-slate-600">停車: ${item.details.parking}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(el);
        });

        // Init Leaflet Maps
        setTimeout(() => {
            initLeafletMaps(dayItems);
        }, 100);
    }

    function toggleDetails(id) {
        const content = document.getElementById(`details-${id}`);
        const icon = document.getElementById(`icon-${id}`);
        const isOpen = content.classList.contains('accordion-open');
        
        document.querySelectorAll('.accordion-content').forEach(el => el.classList.remove('accordion-open', 'accordion-closed') || el.classList.add('accordion-closed'));
        document.querySelectorAll('[id^="icon-"]').forEach(el => el.style.transform = 'rotate(0deg)');

        if (!isOpen) {
            content.classList.remove('accordion-closed');
            content.classList.add('accordion-open');
            icon.style.transform = 'rotate(180deg)';
        }
    }

    function initLeafletMaps(items) {
        items.forEach(item => {
            const mapId = `map-${item.id}`;
            const mapEl = document.getElementById(mapId);
            
            if (!mapEl) return;

            // Initialize Leaflet Map
            const map = L.map(mapId, {
                zoomControl: false,
                attributionControl: false, 
                dragging: false,      
                touchZoom: false,
                scrollWheelZoom: false,
                doubleClickZoom: false,
                boxZoom: false
            });

            // Add OpenStreetMap Tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
            }).addTo(map);

            const startCoords = [item.route.fromCoords.lat, item.route.fromCoords.lng];
            const endCoords = [item.route.toCoords.lat, item.route.toCoords.lng];

            // Add Markers (Circles for cleaner look)
            const circleOptionsStart = {
                color: '#64748b',
                fillColor: '#64748b',
                fillOpacity: 1,
                radius: 6,
                stroke: false
            };
            const circleOptionsEnd = {
                color: '#0d9488',
                fillColor: '#0d9488',
                fillOpacity: 1,
                radius: 6,
                stroke: false
            };

            L.circleMarker(startCoords, circleOptionsStart).addTo(map);
            L.circleMarker(endCoords, circleOptionsEnd).addTo(map);

            // Add Polyline
            const latlngs = [startCoords, endCoords];
            const polyline = L.polyline(latlngs, {
                color: '#0d9488',
                weight: 4,
                opacity: 0.8
            }).addTo(map);

            // Fit Bounds
            map.fitBounds(polyline.getBounds(), {
                padding: [20, 20]
            });
            
            map.invalidateSize();
        });
    }
</script>

</body>
</html>
